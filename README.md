# Analysis_gold_apple
### Анализ влияния активных компонентов в составе продукта на его стоимость и рейтинг в интернет-магазине "Золотое яблоко" с помощью t-критерия Стьюдента и линейной регрессии

---
## Структура
- [parsing.py](https://github.com/silizs/Analysis_gold_apple/blob/main/parsing.py) — код для парсинга [онлайн-каталога](https://goldapple.ru/uhod/uhod-za-licom) продуктов для ухода за кожей лица
- [gold_apple_data.csv](https://github.com/silizs/Analysis_gold_apple/blob/main/gold_apple_data.csv) — собранный датасет
- [analysis.ipynb](https://github.com/silizs/Analysis_gold_apple/blob/main/analysis.ipynb) — ноутбук с анализом данных

Используемые библиотеки: numpy, pandas, scipy, statsmodels, sklearn и другие.

Используемые статистические методы и тесты:
- тест Шапиро-Уилка
- t-критерий Стьюдента
- линейная регрессия
- обобщенная линейная модель
- тест Уайта

---
## Задача и параметры для анализа
Посмотреть влияет ли наличие определенных активных компонентов в составе уходовой косметики для лица на ее рейтинг или цену и, если да, то
посмотреть является ли зависимость линейной и как она выражена.

Список активных компонентов, относительно которых был проведен анализ:
- vitamin C
- vitamin E
- retinol (витамин A)
- hyaluronic acid (гиалуроновая кислота)
- kojic acid (койевая кислота)
- azelaic acid (азелаиновая кислота)
- lactic acid (молочная кислота, подвид AHA-кислот)
- mandelic (миндальная кислота, подвид AHA-кислот)
- glycolic acid (гликолевая кислота, подвид AHA-кислот)
- salicylic acid (салициловая кислота, подвид BHA-кислот)
- glycerin (глицерин)
- ceramide (церамиды)
- peptide (пептиды)
- paraben (парабены)
- niacinamide (ниацинамид)
- zinc (цинк)

---
### Немного о проблемах при сборе данных
Были пропаршены подкаталоги каталога ухода за кожей лица на сайте "Золотого яблока". Мне не удалось обойти переполнение кэша при динамической подгрузке страницы,
так что было изъято 13188 из 25216 ссылок на конкретные продукты. Далее на странице каждого продукта парсились данные о составе, стоимости, количестсве отзывов и рейтинге.
Продукт отсеивался, если не был указан состав или область применения не являлась лицом (внутри каталога встречались также продукты для губ, например бальзамы, или век, например крема).
Часто бывало, что сервер мог долго не отвечать, так что было принято решение поставить таймаут в 15 секунд на респонс.
Таким образом отсеялась еще значительная часть продуктов. Итого было собрано 7817 элементов.

---
## Результаты

Между рейтингом и стоимостью (если точнее логарифмом стоимости, так как она имела логнормальное распределение) не обнаружено линейной зависимости.

**О стоимости**

В процессе анализа были выделены пять множеств взаимодействий компонентов, которые являются статистически значимыми по тесту Стьюдента относительно среднего логарифма цены тех продуктов,
в составе которых нет ни одного рассматриваемого активного компонента. Были построены значимые линейные модели: одна для продуктов, вторая для их взаимодействий.

**О рейтинге**

При проведении теста Стьюдента с поправкой Бонферрони только одна группа взаимодействия компонентов показала статистически значимые результаты.
При более мягкой поправке (p-value < 0.01), были получены шесть групп, пять из которых согласуются с группами, полученными при анализе стоимости.

### Основные выводы в тезисах
- intercept логарифма от цены равен 6.85-7.0, то есть базовая цена без активных компонентов 943-1016 рублей; intercept рейтинга равен 4.5116.
- Построенные линейные модели объясняют вариативность зависимой переменной всего на 2.9-5.8%.
- Цинк положительно влияет на оценку продукта, но не оказывает значимого влияния на стоимость.
- Наличие в составе (койевой, азелаиновой, молочной, миндальной, гликолевой, салициловой) кислот (отдельно от остальных активных компонентов) статистически не влияет ни на стоимость продукта, ни на его рейтинг.
- Витамины C, E, A влияют положительно на стоимость, в 1.3-1.8 раз увеличивая ее относительно базовой.
- Парабены негативно влияют и на рейтинг, и стоимость продукта. Они являются консервантами, так что логично, что они используются в менее качественных товарах и так влияют.
- Ниацинамид, церамиды, пептиды (отдельно от остальных активных компонентов) положительно влияют на стоимость продукта, увеличивая ее соответственно в 1.14, 1.43 и 1.75 раз.
- Ниацинамид при взаимодействии с другими активными компонентами, не делает группу "более значимой" по цене, но делает по рейтингу.
- Церамиды и пептиды *вместе с глицерином* влияют в положительную сторону и на рейтинг, и на стоимость продукта.
- Церамиды и пептиды *вместе с витамином С и глицерином* статистически значимо влияют только на стоимость продукта, увеличивая ее относительно базовой в 1.82 раза.
- Больше всех положительно на стоимость влияет сочетание витамина С, глицерина, молочной и салициловой кислоты, увеличивая ее в 2 раза относительно базовой, в то время как отдельные компоненты (глицерин, молочная и салициловая кислоты) статистически не влияют на цену.
- Тем временем в анализе рейтинга была получена группа из витамина С, глицерина, молочной кислоты и ниацинамида (отличие от предыдущей группы только в одном компоненте), которая влияла положительно. Предположение о том, что предыдущая группа имеет очень высокую стоимость не из-за самих компонентов, а из-за того, что их композиция дает качественный уход за кожей, звучит правдоподобно.
